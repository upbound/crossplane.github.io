<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Crossplane is a framework for building cloud native control planes without needing to write code. It has a highly extensible backend that enables you to build a control plane that can orchestrate applications and infrastructure no matter where they run, and a highly configurable frontend that puts you in control of the schema of the declarative API it offers."><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=robots content="noindex"><title>Install & Configure| Crossplane Documentation</title><meta name=twitter:card content="summary"><meta name=twitter:site content="https://crossplane.io"><meta name=twitter:title content="Crossplane"><meta name=twitter:description content="The cloud-native control plane framework"><meta name=twitter:image:src content="https://crossplane.io/images/twitter-card_400x400.jpg"><link rel=apple-touch-icon sizes=180x180 href="/favicons/apple-touch-icon.png?v=1.0"><link rel=icon type=image/png sizes=32x32 href="/favicons/favicon-32x32.png?v=1.0"><link rel=icon type=image/png sizes=16x16 href="/favicons/favicon-16x16.png?v=1.0"><link rel=manifest href="/favicons/site.webmanifest?v=1.0"><link rel=mask-icon href="/favicons/safari-pinned-tab.svg?v=1.0" color=#5bbad5><link rel="shortcut icon" href="/favicons/favicon.ico?v=1.0"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css><link rel=stylesheet href=/css/docs.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js></script></head><body><div id=header><div><div class=logo><a href=/><img src=/images/logo.svg alt="Crossplane Logo"></a></div><div class=hamburger-controls onclick='return document.body.classList.contains("menu-open")?document.body.classList.remove("menu-open"):document.body.classList.add("menu-open"),!1'><span></span>
<span></span>
<span></span></div><ul class=links><li><a href=https://github.com/crossplane/crossplane><span class=md-hidden>Get Started on</span> GitHub</a></li><li><a href=/v1.9/>Documentation</a></li><li><a href=/community/>Community</a></li><li><a href=https://slack.crossplane.io/>Slack <span class=md-hidden>Channel</span></a></li><li><a href=https://blog.crossplane.io/>Blog</a></li><li><a href=https://twitter.com/crossplane_io>Twitter</a></li></ul></div></div><div id=docs-header><div><h1>Documentation</h1><div class=versions><div><div><select onchange="window.location.href=this.value"><option selected value=/master/getting-started/install-configure/>Crossplane master</option><option value=/v1.9/getting-started/install-configure/>Crossplane v1.9</option><option value=/v1.8/getting-started/install-configure/>Crossplane v1.8</option><option value=/v1.7/getting-started/install-configure/>Crossplane v1.7</option></select></div></div></div></div></div><div class=page><div class=docs-menu><ul id=docs-ul></ul></div><div class=docs-content><div class=docs-actions><a id=edit href=https://github.com/crossplane/crossplane/tree/master/docs/install-configure.md><img src=/images/github-teal.svg>Edit on GitHub</a></div><div class="alert master"><p><b>PLEASE NOTE</b>: This document applies to an <b>unreleased</b> version of Crossplane. It is strongly recommended that you only use official releases of Crossplane, as unreleased versions are subject to changes and incompatibilities that will not be supported in the official releases.</p><p>If you are using an official release version of Crossplane, you should refer to the documentation for your specific version.</p><strong>Documentation for other releases can be found by using the version selector in the top right of any doc page.</strong></div><h1>Install & Configure</h1><h2 id=choosing-your-crossplane-distribution>Choosing Your Crossplane Distribution</h2><p>Users looking to use Crossplane for the first time have two options available to
them today. The first way is to use the version of Crossplane which is
maintained and released by the community and found on the <a href=https://github.com/crossplane/crossplane>Crossplane GitHub</a>.</p><p>The second option is to use a vendor supported Crossplane distribution. These
distributions are <a href=https://github.com/cncf/crossplane-conformance>certified by the CNCF</a> to be conformant with Crossplane, but
may include additional features or tooling around it that makes it easier to use
in production environments.</p><ul class="nav nav-tabs"><li class=active><a href=#crossplane-upstream data-toggle=tab aria-expanded=true>Crossplane (upstream)</a></li><li><a href=#downstream-distribution data-toggle=tab aria-expanded=true>Downstream Distribution</a></li></ul><br><div class=tab-content><div class="tab-pane fade active in" id=crossplane-upstream><h2 id=start-with-upstream-crossplane>Start with Upstream Crossplane</h2><p>Installing Crossplane into an existing Kubernetes cluster will require a bit
more setup, but can provide more flexibility for users who need it.</p><h3 id=get-a-kubernetes-cluster>Get a Kubernetes Cluster</h3><ul class="nav nav-tabs"><li class=active><a href=#macos-via-homebrew data-toggle=tab aria-expanded=true>macOS via Homebrew</a></li><li><a href=#macos--linux data-toggle=tab aria-expanded=true>macOS / Linux</a></li><li><a href=#windows data-toggle=tab aria-expanded=true>Windows</a></li></ul><br><div class=tab-content><div class="tab-pane fade active in" id=macos-via-homebrew><p>For macOS via Homebrew use the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew upgrade
</span></span><span style=display:flex><span>brew install kind
</span></span><span style=display:flex><span>brew install kubectl
</span></span><span style=display:flex><span>brew install helm
</span></span><span style=display:flex><span>kind create cluster --image kindest/node:v1.23.0 --wait 5m
</span></span></code></pre></div></div><div class="tab-pane fade" id=macos--linux><p>For macOS / Linux use the following:</p><ul><li><a href=https://kubernetes.io/docs/setup/>Kubernetes cluster</a></li><li><a href=https://kind.sigs.k8s.io/docs/user/quick-start/>Kind</a></li><li><a href=https://minikube.sigs.k8s.io/docs/start/>Minikube</a>, minimum version <code>v0.28+</code></li><li>etc.</li><li><a href=https://helm.sh/docs/intro/using_helm/>Helm</a>, minimum version <code>v3.0.0+</code>.</li></ul></div><div class="tab-pane fade" id=windows><p>For Windows use the following:</p><ul><li><a href=https://kubernetes.io/docs/setup/>Kubernetes cluster</a></li><li><a href=https://kind.sigs.k8s.io/docs/user/quick-start/>Kind</a></li><li><a href=https://minikube.sigs.k8s.io/docs/start/>Minikube</a>, minimum version <code>v0.28+</code></li><li>etc.</li><li><a href=https://helm.sh/docs/intro/using_helm/>Helm</a>, minimum version <code>v3.0.0+</code>.</li></ul></div></div><p><br></p><h3 id=install-crossplane>Install Crossplane</h3><ul class="nav nav-tabs"><li class=active><a href=#helm-3-stable data-toggle=tab aria-expanded=true>Helm 3 (stable)</a></li><li><a href=#helm-3-latest data-toggle=tab aria-expanded=true>Helm 3 (latest)</a></li></ul><br><div class=tab-content><div class="tab-pane fade active in" id=helm-3-stable><p>Use Helm 3 to install the latest official <code>stable</code> release of Crossplane, suitable for community use and testing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create namespace crossplane-system
</span></span><span style=display:flex><span>helm repo add crossplane-stable https://charts.crossplane.io/stable
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm install crossplane --namespace crossplane-system crossplane-stable/crossplane
</span></span></code></pre></div></div><div class="tab-pane fade" id=helm-3-latest><p>Use Helm 3 to install the latest pre-release version of Crossplane:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create namespace crossplane-system
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm repo add crossplane-master https://charts.crossplane.io/master/
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>helm search repo crossplane-master --devel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm install crossplane --namespace crossplane-system crossplane-master/crossplane <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --devel --version <version>
</span></span></code></pre></div><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm install crossplane --namespace crossplane-system crossplane-master/crossplane <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version 0.11.0-rc.100.gbc5d311 --devel
</span></span></code></pre></div></div></div><p><br></p><h3 id=check-crossplane-status>Check Crossplane Status</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm list -n crossplane-system
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get all -n crossplane-system
</span></span></code></pre></div><h2 id=install-crossplane-cli>Install Crossplane CLI</h2><p>The Crossplane CLI extends <code>kubectl</code> with functionality to build, push, and
install [Crossplane packages]:</p><ul class="nav nav-tabs"><li class=active><a href=#stable data-toggle=tab aria-expanded=true>Stable</a></li><li><a href=#latest data-toggle=tab aria-expanded=true>Latest</a></li></ul><br><div class=tab-content><div class="tab-pane fade active in" id=stable><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sL https://raw.githubusercontent.com/crossplane/crossplane/master/install.sh | sh
</span></span></code></pre></div></div><div class="tab-pane fade" id=latest><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sL https://raw.githubusercontent.com/crossplane/crossplane/master/install.sh | CHANNEL<span style=color:#f92672>=</span>master sh
</span></span></code></pre></div><p>You may also specify <code>VERSION</code> for download if you would like to select a
specific version from the given release channel. If a version is not specified
the latest version from the release channel will be used.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sL https://raw.githubusercontent.com/crossplane/crossplane/master/install.sh | CHANNEL<span style=color:#f92672>=</span>master VERSION<span style=color:#f92672>=</span>v1.0.0-rc.0.130.g94f34fd3 sh
</span></span></code></pre></div></div></div><p><br></p><h2 id=select-a-getting-started-configuration>Select a Getting Started Configuration</h2><p>Crossplane goes beyond simply modelling infrastructure primitives as custom
resources - it enables you to define new custom resources with schemas of your
choosing. We call these “composite resources” (XRs). Composite resources compose
managed resources – Kubernetes custom resources that offer a high fidelity
representation of an infrastructure primitive, like an SQL instance or a
firewall rule.</p><p>We use two special Crossplane resources to define and configure these new custom
resources:</p><ul><li>A <code>CompositeResourceDefinition</code> (XRD) <em>defines</em> a new kind of composite
resource, including its schema. An XRD may optionally <em>offer</em> a claim (XRC).</li><li>A <code>Composition</code> specifies which resources a composite resource will be
composed of, and how they should be configured. You can create multiple
<code>Composition</code> options for each composite resource.</li></ul><p>XRDs and Compositions may be packaged and installed as a <em>configuration</em>. A
configuration is a [package] of composition configuration that can easily be
installed to Crossplane by creating a declarative <code>Configuration</code> resource, or
by using <code>kubectl crossplane install configuration</code>.</p><p>In the examples below we will install a configuration that defines a new
<code>XPostgreSQLInstance</code> XR and <code>PostgreSQLInstance</code> XRC that takes a
single <code>storageGB</code> parameter, and creates a connection <code>Secret</code> with keys for
<code>username</code>, <code>password</code>, and <code>endpoint</code>. A <code>Configuration</code> exists for each
provider that can satisfy a <code>PostgreSQLInstance</code>. Let’s get started!</p><ul class="nav nav-tabs"><li class=active><a href=#aws-default-vpc data-toggle=tab aria-expanded=true>AWS (Default VPC)</a></li><li><a href=#aws-new-vpc data-toggle=tab aria-expanded=true>AWS (New VPC)</a></li><li><a href=#gcp data-toggle=tab aria-expanded=true>GCP</a></li><li><a href=#azure data-toggle=tab aria-expanded=true>Azure</a></li></ul><br><div class=tab-content><div class="tab-pane fade active in" id=aws-default-vpc><h3 id=install-configuration-package>Install Configuration Package</h3><blockquote><p>If you prefer to see the contents of this configuration package and how it is
constructed prior to install, skip ahead to the [create a configuration]
section.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl crossplane install configuration registry.upbound.io/xp/getting-started-with-aws:latest
</span></span></code></pre></div><p>Wait until all packages become healthy:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>watch kubectl get pkg
</span></span></code></pre></div><h3 id=get-aws-account-keyfile>Get AWS Account Keyfile</h3><p>Using an AWS account with permissions to manage RDS databases:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>AWS_PROFILE<span style=color:#f92672>=</span>default <span style=color:#f92672>&&</span> echo -e <span style=color:#e6db74>"[default]\naws_access_key_id = </span><span style=color:#66d9ef>$(</span>aws configure get aws_access_key_id --profile $AWS_PROFILE<span style=color:#66d9ef>)</span><span style=color:#e6db74>\naws_secret_access_key = </span><span style=color:#66d9ef>$(</span>aws configure get aws_secret_access_key --profile $AWS_PROFILE<span style=color:#66d9ef>)</span><span style=color:#e6db74>"</span> > creds.conf
</span></span></code></pre></div><h3 id=create-a-provider-secret>Create a Provider Secret</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create secret generic aws-creds -n crossplane-system --from-file<span style=color:#f92672>=</span>creds<span style=color:#f92672>=</span>./creds.conf
</span></span></code></pre></div><h3 id=configure-the-provider>Configure the Provider</h3><p>We will create the following <code>ProviderConfig</code> object to configure credentials
for AWS Provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>aws.crossplane.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ProviderConfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>credentials</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>secretRef</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crossplane-system</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>aws-creds</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>key</span>: <span style=color:#ae81ff>creds</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/crossplane/crossplane/master/docs/snippets/configure/aws/providerconfig.yaml
</span></span></code></pre></div></div><div class="tab-pane fade" id=aws-new-vpc><h3 id=install-configuration-package>Install Configuration Package</h3><blockquote><p>If you prefer to see the contents of this configuration package and how it is
constructed prior to install, skip ahead to the [create a configuration]
section.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl crossplane install configuration registry.upbound.io/xp/getting-started-with-aws-with-vpc:latest
</span></span></code></pre></div><p>Wait until all packages become healthy:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>watch kubectl get pkg
</span></span></code></pre></div><h3 id=get-aws-account-keyfile>Get AWS Account Keyfile</h3><p>Using an AWS account with permissions to manage RDS databases:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>AWS_PROFILE<span style=color:#f92672>=</span>default <span style=color:#f92672>&&</span> echo -e <span style=color:#e6db74>"[default]\naws_access_key_id = </span><span style=color:#66d9ef>$(</span>aws configure get aws_access_key_id --profile $AWS_PROFILE<span style=color:#66d9ef>)</span><span style=color:#e6db74>\naws_secret_access_key = </span><span style=color:#66d9ef>$(</span>aws configure get aws_secret_access_key --profile $AWS_PROFILE<span style=color:#66d9ef>)</span><span style=color:#e6db74>"</span> > creds.conf
</span></span></code></pre></div><h3 id=create-a-provider-secret>Create a Provider Secret</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create secret generic aws-creds -n crossplane-system --from-file<span style=color:#f92672>=</span>creds<span style=color:#f92672>=</span>./creds.conf
</span></span></code></pre></div><h3 id=configure-the-provider>Configure the Provider</h3><p>We will create the following <code>ProviderConfig</code> object to configure credentials
for AWS Provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>aws.crossplane.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ProviderConfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>credentials</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>secretRef</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crossplane-system</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>aws-creds</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>key</span>: <span style=color:#ae81ff>creds</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/crossplane/crossplane/master/docs/snippets/configure/aws/providerconfig.yaml
</span></span></code></pre></div></div><div class="tab-pane fade" id=gcp><h3 id=install-configuration-package>Install Configuration Package</h3><blockquote><p>If you prefer to see the contents of this configuration package and how it is
constructed prior to install, skip ahead to the [create a configuration]
section.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl crossplane install configuration registry.upbound.io/xp/getting-started-with-gcp:latest
</span></span></code></pre></div><p>Wait until all packages become healthy:</p><pre tabindex=0><code>watch kubectl get pkg
</code></pre><h3 id=get-gcp-account-keyfile>Get GCP Account Keyfile</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># replace this with your own gcp project id and the name of the service account</span>
</span></span><span style=display:flex><span><span style=color:#75715e># that will be created.</span>
</span></span><span style=display:flex><span>PROJECT_ID<span style=color:#f92672>=</span>my-project
</span></span><span style=display:flex><span>NEW_SA_NAME<span style=color:#f92672>=</span>test-service-account-name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># create service account</span>
</span></span><span style=display:flex><span>SA<span style=color:#f92672>=</span><span style=color:#e6db74>"</span><span style=color:#e6db74>${</span>NEW_SA_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>@</span><span style=color:#e6db74>${</span>PROJECT_ID<span style=color:#e6db74>}</span><span style=color:#e6db74>.iam.gserviceaccount.com"</span>
</span></span><span style=display:flex><span>gcloud iam service-accounts create $NEW_SA_NAME --project $PROJECT_ID
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># enable cloud API</span>
</span></span><span style=display:flex><span>SERVICE<span style=color:#f92672>=</span><span style=color:#e6db74>"sqladmin.googleapis.com"</span>
</span></span><span style=display:flex><span>gcloud services enable $SERVICE --project $PROJECT_ID
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># grant access to cloud API</span>
</span></span><span style=display:flex><span>ROLE<span style=color:#f92672>=</span><span style=color:#e6db74>"roles/cloudsql.admin"</span>
</span></span><span style=display:flex><span>gcloud projects add-iam-policy-binding --role<span style=color:#f92672>=</span><span style=color:#e6db74>"</span>$ROLE<span style=color:#e6db74>"</span> $PROJECT_ID --member <span style=color:#e6db74>"serviceAccount:</span>$SA<span style=color:#e6db74>"</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># create service account keyfile</span>
</span></span><span style=display:flex><span>gcloud iam service-accounts keys create creds.json --project $PROJECT_ID --iam-account $SA
</span></span></code></pre></div><h3 id=create-a-provider-secret>Create a Provider Secret</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create secret generic gcp-creds -n crossplane-system --from-file<span style=color:#f92672>=</span>creds<span style=color:#f92672>=</span>./creds.json
</span></span></code></pre></div><h3 id=configure-the-provider>Configure the Provider</h3><p>We will create the following <code>ProviderConfig</code> object to configure credentials
for GCP Provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># replace this with your own gcp project id</span>
</span></span><span style=display:flex><span>PROJECT_ID<span style=color:#f92672>=</span>my-project
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>"apiVersion: gcp.crossplane.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: ProviderConfig
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: default
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  projectID: </span><span style=color:#e6db74>${</span>PROJECT_ID<span style=color:#e6db74>}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  credentials:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    source: Secret
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    secretRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      namespace: crossplane-system
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: gcp-creds
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      key: creds"</span> | kubectl apply -f -
</span></span></code></pre></div></div><div class="tab-pane fade" id=azure><h3 id=install-configuration-package>Install Configuration Package</h3><blockquote><p>If you prefer to see the contents of this configuration package and how it is
constructed prior to install, skip ahead to the [create a configuration]
section.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl crossplane install configuration registry.upbound.io/xp/getting-started-with-azure:latest
</span></span></code></pre></div><p>Wait until all packages become healthy:</p><pre tabindex=0><code>watch kubectl get pkg
</code></pre><h3 id=get-azure-principal-keyfile>Get Azure Principal Keyfile</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># create service principal with Owner role</span>
</span></span><span style=display:flex><span>az ad sp create-for-rbac --role Contributor --scopes /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx > <span style=color:#e6db74>"creds.json"</span>
</span></span></code></pre></div><h3 id=create-a-provider-secret>Create a Provider Secret</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create secret generic azure-creds -n crossplane-system --from-file<span style=color:#f92672>=</span>creds<span style=color:#f92672>=</span>./creds.json
</span></span></code></pre></div><h3 id=configure-the-provider>Configure the Provider</h3><p>We will create the following <code>ProviderConfig</code> object to configure credentials
for Azure Provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>azure.crossplane.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ProviderConfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>credentials</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>secretRef</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crossplane-system</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>azure-creds</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>key</span>: <span style=color:#ae81ff>creds</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/crossplane/crossplane/master/docs/snippets/configure/azure/providerconfig.yaml
</span></span></code></pre></div></div></div><p><br></p><h2 id=next-steps>Next Steps</h2><p>Now that you have configured Crossplane with support for <code>PostgreSQLInstance</code>,
you can [provision infrastructure].</p></div><div class="tab-pane fade" id=downstream-distribution><h2 id=start-with-a-downstream-distribution>Start with a Downstream Distribution</h2><p>Upbound, the founders of Crossplane, maintains a free and open source downstream
distribution of Crossplane which makes getting started with Crossplane easy.
Universal Crossplane, or UXP for short, connects to Upbound’s hosted management
console and Registry to make it easier to develop, debug, and manage Provider
and Configuration packages.</p><p>[Get started with Universal Crossplane] on the Upbound Documentation site.</p><p><i>Want see another hosted Crossplane service listed? Please [reach out on
Slack][Slack] and our community will highlight it here!</i></p></div></div><p><br></p><h2 id=more-info>More Info</h2><ul><li><p>See <a href=/master/reference/install/>Install</a> and <a href=/master/reference/configure/>Configure</a> docs for installing alternate versions and more
detailed instructions.</p></li><li><p>See <a href=/master/reference/uninstall/>Uninstall</a> docs for cleaning up resources, packages, and Crossplane
itself.</p></li><li><p>See <a href=/master/concepts/providers/>Providers</a> for installing and using different providers beyond AWS, GCP
and Azure mentionded in this guide.</p></li></ul></div></div><script>var i,j,menu=[],menuDom,item,itemDom,children;menu.push({childCurrent:!0,children:[{current:!0,name:"Install \u0026 Configure",url:"/master/getting-started/install-configure/"},{current:!1,name:"Provision Infrastructure",url:"/master/getting-started/provision-infrastructure/"},{current:!1,name:"Create a Configuration",url:"/master/getting-started/create-configuration/"}],current:!1,name:"Getting Started",url:"/master/getting-started/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Providers",url:"/master/concepts/providers/"},{current:!1,name:"Managed Resources",url:"/master/concepts/managed-resources/"},{current:!1,name:"Composite Resources",url:"/master/concepts/composition/"},{current:!1,name:"Crossplane Packages",url:"/master/concepts/packages/"},{current:!1,name:"Terminology",url:"/master/concepts/terminology/"}],current:!1,name:"Concepts",url:"/master/concepts/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Upgrading to v0.14",url:"/master/guides/upgrading-to-v0.14/"},{current:!1,name:"Upgrading to v1.x",url:"/master/guides/upgrading-to-v1.x/"},{current:!1,name:"Vault as an External Secret Store",url:"/master/guides/vault-as-secret-store/"},{current:!1,name:"Vault Credential Injection",url:"/master/guides/vault-injection/"},{current:!1,name:"Multi-Tenant Crossplane",url:"/master/guides/multi-tenant/"},{current:!1,name:"Configuring Crossplane with Argo CD",url:"/master/guides/argo-cd-crossplane/"},{current:!1,name:"Self-Signed CA Certs",url:"/master/guides/self-signed-ca-certs/"},{current:!1,name:"Composition Revisions",url:"/master/guides/composition-revisions/"}],current:!1,name:"Guides",url:"/master/guides/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Install Crossplane",url:"/master/reference/install/"},{current:!1,name:"Configure Your Cloud Provider Account",url:"/master/reference/configure/"},{current:!1,name:"Uninstall Crossplane",url:"/master/reference/uninstall/"},{current:!1,name:"Composition",url:"/master/reference/composition/"},{current:!1,name:"xpkg Specification",url:"/master/reference/xpkg/"},{current:!1,name:"Troubleshoot",url:"/master/reference/troubleshoot/"},{current:!1,name:"Learn More",url:"/master/reference/learn_more/"},{current:!1,name:"Release Cycle",url:"/master/reference/release-cycle/"}],current:!1,name:"Reference",url:"/master/reference/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Crossplane",url:"/master/api-docs/crossplane/"},{current:!1,name:"provider-alibaba",url:"/master/api-docs/provider-alibaba/"},{current:!1,name:"provider-aws",url:"/master/api-docs/provider-aws/"},{current:!1,name:"provider-azure",url:"/master/api-docs/provider-azure/"},{current:!1,name:"provider-gcp",url:"/master/api-docs/provider-gcp/"},{current:!1,name:"provider-helm",url:"/master/api-docs/provider-helm/"},{current:!1,name:"provider-rook",url:"/master/api-docs/provider-rook/"}],current:!1,name:"API Documentation",url:"/master/api-docs/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Provider Development Guide",url:"/master/contributing/provider_development_guide/"},{current:!1,name:"Observability Developer Guide",url:"/master/contributing/observability_developer_guide/"},{current:!1,name:"Release Process",url:"/master/contributing/release-process/"},{current:!1,name:"Adding Secret Store Support",url:"/master/contributing/adding_external_secret_store_support/"},{current:!1,name:"Crossplane Documentation",url:"/master/contributing/docs/"}],current:!1,name:"Contributing",url:"/master/contributing/"}),menu.push({childCurrent:!1,children:[{current:!1,name:"Related Projects",url:"/master/faqs/related_projects/"}],current:!1,name:"FAQ",url:"/master/faqs/"});function getEntry(e){var t=document.createElement("li");return e.current?(t.innerHTML=e.name,t.classList.add("current")):t.innerHTML='<a href="'+e.url+'">'+e.name+"</a>",t}function flushCss(e){e.offsetHeight}function addArrow(e){var t=document.createElement("a");t.classList.add("arrow"),t.innerHTML="<div />",t.onclick=function(e){return function(){var n=59,s=16,t=n+s+e.lastChild.clientHeight+"px";return e.classList.toggle("open"),e.classList.contains("open")?e.style.height=t:(e.style.height==="auto"&&(e.style.transition="none",e.style.height=t,flushCss(e),e.style.transition=""),e.style.height="59px"),!1}}(e),e.appendChild(t),item.current&&item.children||item.childCurrent?(e.classList.add("open"),e.style.height="auto"):e.style.height="59px"}menuDom=document.getElementById("docs-ul");for(i=0;i<menu.length;i++){if(item=menu[i],itemDom=getEntry(item),item.childCurrent&&itemDom.classList.add("childCurrent"),item.children){addArrow(itemDom),itemDom.classList.add("children"),children=document.createElement("ul");for(j=0;j<item.children.length;j++)children.appendChild(getEntry(item.children[j]));itemDom.appendChild(children)}menuDom.appendChild(itemDom)}</script><script src=/js/anchor.js></script>
<script>anchors.options={placement:"right",icon:"#"},document.addEventListener("DOMContentLoaded",function(){anchors.add(".docs-content h1, .docs-content h2, .docs-content h3, .docs-content h4, .docs-content h5, .docs-content h6")})</script><div id=footer><div class=footer-main><div class=main><div class=logo><img src=/images/logo.svg alt="Crossplane Logo"></div></div><div class="links sm-hidden"><a href=https://twitter.com/crossplane_io>Twitter</a>
<a href=/v1.9/>Documentation</a>
<a href=https://github.com/crossplane/crossplane>GitHub</a>
<a href=https://slack.crossplane.io/>Slack Channel</a>
<a href=https://www.youtube.com/channel/UC19FgzMBMqBro361HbE46Fw>YouTube</a>
<a href=https://groups.google.com/forum/#!forum/crossplane-dev>Forum</a></div></div><div class=lf-copyright><p>&#169; Crossplane Authors 2022. Documentation distributed under
<a href=https://creativecommons.org/licenses/by/4.0/>CC-BY-4.0</a>.</p><p>&#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
<a href=https://www.linuxfoundation.org/trademark-usage/>Trademark Usage</a> page.</p></div><script src=/js/slack-popup.js></script></div><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-110275540-2","auto"),ga("send","pageview")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SFCPQYSLHY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SFCPQYSLHY")</script><script type=text/javascript id=hs-script-loader async defer src=https://js.hs-scripts.com/5557732.js></script></body></html>